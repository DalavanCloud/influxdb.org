<!DOCTYPE html><html><head><meta charset="utf-8" /><!--Always force latest IE rendering engine or request Chrome Frame--><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><!--Use title if it's in the page YAML frontmatter--><title>InfluxDB Documentation</title><script src="//fast.fonts.net/jsapi/2de9def5-2dd1-4d89-b4bb-cd7e5f821645.js" type="text/javascript"></script><link href="/stylesheets/all.css" rel="stylesheet" type="text/css" /><script src="/javascripts/all.js" type="text/javascript"></script></head><body class="docs docs_v0"><header class="navigation"><div class="menu-wrapper"><a class="logo" href="/"><img src="/images/influxdb-light400.png" /></a><p class="navigation-menu-button" id="js-mobile-menu">MENU</p><div class="nav"><ul id="navigation-menu"><li class="nav-link"><a href="/docs/v0.8/introduction/overview.html">Overview</a></li><li class="nav-link"><a target="blank" href="https://customers.influxdb.com">Support & Hosting</a></li><li class="nav-link"><a href="/blog">Blog</a></li><li class="nav-link"><a href="/docs/v0.8/introduction/getting_started.html">Docs</a></li><li class="nav-link"><a href="/community">Community</a></li><li class="nav-link"><a target="blank" href="http://play.influxdb.org">Play</a></li></ul></div><div class="navigation-tools"><a class="sign-up" href="/download">Download</a></div></div></header><section role="main"><div class="row"><div class="large-4 medium-4 columns"><div class="sidebar"><nav><ul class="side-nav"><li class="heading">Introduction</li><li><a href="/docs/v0.8/introduction/overview.html">Overview</a></li><li><a href="/docs/v0.8/introduction/installation.html">Installation</a></li><li><a href="/docs/v0.8/introduction/getting_started.html">Getting Started</a></li><li class="divider"></li><li class="heading">API</li><li><a href="/docs/v0.8/api/reading_and_writing_data.html">Reading & Writing Data</a></li><li><a href="/docs/v0.8/api/query_language.html">Query Language</a></li><li><a href="/docs/v0.8/api/aggregate_functions.html">Aggregate Functions</a></li><li><a href="/docs/v0.8/api/continuous_queries.html">Continuous Queries</a></li><li><a href="/docs/v0.8/api/chunked_responses.html">Chunked HTTP Responses</a></li><li><a href="/docs/v0.8/api/administration.html">Administration</a></li><li class="divider"></li><li class="heading">UI</li><li><a href="/docs/v0.8/ui/built_in_admin_and_explorer.html">Built-in Admin and Explorer Interface</a></li><li><a href="/docs/v0.8/ui/grafana.html">Grafana Dashboards</a></li><li><a href="https://github.com/hakobera/influga">Influga Dashboards</a></li><li class="divider"></li><li class="heading">Advanced Topics</li><li><a href="/docs/v0.8/advanced_topics/sharding_and_storage.html">Underlying Storage and Shards</a></li><li><a href="/docs/v0.8/advanced_topics/configuration_options.html">Configuration Options</a></li><li><a href="/docs/v0.8/advanced_topics/schema_design.html">Schema Design</a></li><li><a href="/docs/v0.8/advanced_topics/performance_considerations.html">Performance Considerations</a></li><li><a href="/docs/v0.8/advanced_topics/security.html">Security</a></li><li class="divider"></li><li class="heading">Clustering</li><li><a href="/docs/v0.8/clustering/design.html">Design</a></li><li><a href="/docs/v0.8/clustering/setup.html">Setup</a></li><li class="divider"></li><li class="heading">Guides</li><li><a href="/docs/v0.8/guides/intro.html">Introduction</a></li><li><a href="/docs/v0.8/guides/replacing_graphite.html">Replacing Graphite</a></li><li><a href="http://www.fluentd.org/guides/recipes/syslog-influxdb">Syslog Analytics with FluentD</a></li><li class="divider"></li><li class="heading">Future Features</li><li><a href="/docs/v0.8/future/binary_protocol.html">Binary Protocol</a></li><li><a href="/docs/v0.8/future/pubsub.html">Pubsub</a></li><li><a href="/docs/v0.8/future/column_indexes.html">Column Indexes and Tags</a></li><li><a href="/docs/v0.8/future/shard_spaces.html">Shard Spaces and Retention Policies</a></li><li><a href="/docs/v0.8/future/custom_functions.html">Custom Functions</a></li><li><a href="/docs/v0.8/future/security.html">Security Enhancements</a></li><li><a href="/docs/v0.8/future/merge.html">Merging Many Series</a></li><li class="divider"></li><li class="heading">Client Libraries</li><li><a href="/docs/v0.8/client_libraries/javascript.html">JavaScript</a></li><li><a href="https://github.com/influxdb/influxdb-ruby">Ruby</a></li><li><a href="https://github.com/influxdb/influxdb-rails">Rails</a></li><li><a href="/docs/v0.8/client_libraries/python.html">Python</a></li><li><a href="https://github.com/puentesarrin/asyncflux">Python (async Tornado)</a></li><li><a href="/docs/v0.8/client_libraries/node.html">Node.js</a></li><li><a href="/docs/v0.8/client_libraries/php.html">PHP</a></li><li><a href="https://github.com/majst01/influxdb-java">Java</a></li><li><a href="https://github.com/olauzon/capacitor">Clojure</a></li><li><a href="https://github.com/mmaul/cl-influxdb">Common Lisp</a></li><li><a href="https://github.com/novaquark/metrics-influxdb">Java Metrics</a></li><li><a href="https://github.com/influxdb/influxdb-go">Go</a></li><li><a href="https://github.com/rcrowley/go-metrics">Go Metrics</a></li><li><a href="https://github.com/influxdb/influxdb-scala">Scala</a></li><li><a href="https://github.com/influxdb/influxdb-r">R</a></li><li><a href="https://metacpan.org/pod/InfluxDB">Perl</a></li><li><a href="https://github.com/maoe/influxdb-haskell">Haskell</a></li><li class="divider"></li><li class="heading">Contributing</li><li><a href="https://github.com/influxdb/influxdb/blob/master/docs/contributing.md">Building and Contributing</a></li><li><a href="/community/cla.html">CLA</a></li><li><a href="https://github.com/influxdb/influxdb.org">To this Documentation</a></li><li><a href="https://github.com/influxdb/influxdb/blob/master/LICENSE">License (MIT)</a></li><li class="divider"></li><li class="heading">Other Libraries and Tools</li><li><a href="https://github.com/Dieterbe/influx-cli">CLI (Go)</a></li><li><a href="https://github.com/FGRibreau/influxdb-cli">CLI (Node)</a></li><li><a href="https://github.com/phstc/influxdb-cli">CLI (Ruby)</a></li><li><a href="http://grafana.org/">Grafana (dashboards)</a></li><li><a href="https://github.com/vimeo/graphite-influxdb">Graphite-Influxdb bridge</a></li><li><a href="https://github.com/obfuscurity/tasseo">Tasseo (realtime dashboard)</a></li><li><a href="https://github.com/bernd/statsd-influxdb-backend">StatsD Backend</a></li><li><a href="https://github.com/bpaquet/collectd-influxdb-proxy">CollectD Proxy</a></li><li><a href="https://github.com/fangli/fluent-plugin-influxdb">FluentD Plugin</a></li><li><a href="https://github.com/lusis/sensu_influxdb_handler">Sensu Handler</a></li><li><a href="https://github.com/SimpleFinance/chef-handler-influxdb">Chef Handler/Reporter</a></li><li><a href="https://github.com/CargoSense/puppet-influxdb">Config Management via Boxen</a></li><li><a href="https://github.com/savoirfairelinux/mod-influxdb">Shinken module</a></li><li class="divider"></li><li class="heading">Docs Versions</li><li><a href="/docs/v0.6/introduction/overview.html">v0.6</a></li><li><a href="/docs/v0.7/introduction/overview.html">v0.7</a></li><li><a href="/docs/v0.8/introduction/overview.html">v0.8</a></li></ul></nav><a class="button download expand" href="/download" style="margin-bottom: 0;">Download InfluxDB</a></div></div><div class="large-8 medium-8 columns" id="docs"><h1 id="administration-&amp;-security">Administration &amp; Security</h1>

<p>The following section details the endpoints in the HTTP API for administering the cluster and managing database security.</p>

<h2 id="creating-and-dropping-databases">Creating and Dropping Databases</h2>

<p>There are two endpoints for creating or dropping databases. The requesting user must be a cluster administrator.</p>
<pre class="highlight shell"><span class="c"># create a database</span>
curl -X POST <span class="s1">'http://localhost:8086/db?u=root&amp;p=root'</span> <span class="se">\</span>
  -d <span class="s1">'{"name": "site_development"}'</span>

<span class="c"># drop a database</span>
curl -X DELETE <span class="s1">'http://localhost:8086/db/site_development?u=root&amp;p=root'</span>
</pre>

<h2 id="security">Security</h2>

<p>InfluxDB has three different kinds of users:</p>

<h3 id="cluster-admin">cluster admin</h3>

<p>A cluster admin can add and drop databases. Add and remove database
users and database admins to any database and change their read and
write access. A cluster admin can&rsquo;t query a database though. Below are
the endpoints specific to cluster admins:</p>
<pre class="highlight shell"><span class="c"># get list of cluster admins curl</span>
<span class="s1">'http://localhost:8086/cluster_admins?u=root&amp;p=root'</span>

<span class="c"># add cluster admin</span>
curl -X POST <span class="s1">'http://localhost:8086/cluster_admins?u=root&amp;p=root'</span> <span class="se">\</span>
  -d <span class="s1">'{"name: "paul", "password": "i write teh docz"}'</span>

<span class="c"># update cluster admin password</span>
curl -X POST <span class="s1">'http://localhost:8086/cluster_admins/paul?u=root&amp;p=root'</span> <span class="se">\</span>
  -d <span class="s1">'{"password": "new pass"}'</span>

<span class="c"># delete cluster admin</span>
curl -X DELETE <span class="s1">'http://localhost:8086/cluster_admins/paul?u=root&amp;p=root'</span>
</pre>

<h3 id="database-admin">database admin</h3>

<p>A database admin can add and remove databases admins and database
users and change their read and write permissions. It can&rsquo;t add
or remove users from a different database.</p>

<h3 id="database-user">database user</h3>

<p>A database user can read and write data to the current database.
The user can&rsquo;t add or remove users or admins or read/write data
from/to time series that they don&rsquo;t have permissions for.</p>

<p>Below are examples of adding/removing databases users and database
admins:</p>
<pre class="highlight shell"><span class="c"># Database users, with a database name of site_dev</span>

<span class="c"># add database user</span>
curl -X POST <span class="s1">'http://localhost:8086/db/site_dev/users?u=root&amp;p=root'</span> <span class="se">\</span>
  -d <span class="s1">'{"name": "paul", "password": "i write teh docz"}'</span>

<span class="c"># delete database user</span>
curl -X DELETE <span class="s1">'http://localhost:8086/db/site_dev/users/paul?u=root&amp;p=root'</span>

<span class="c"># update user's password</span>
curl -X POST <span class="s1">'http://localhost:8086/db/site_dev/users/paul?u=root&amp;p=root'</span> <span class="se">\</span>
  -d <span class="s1">'{"password": "new pass"}'</span>

<span class="c"># get list of database users</span>
curl <span class="s1">'http://localhost:8086/db/site_dev/users?u=root&amp;p=root'</span>

<span class="c"># add database admin privilege</span>
curl -X POST <span class="s1">'http://localhost:8086/db/site_dev/users/paul?u=root&amp;p=root'</span> <span class="se">\</span>
  -d <span class="s1">'{"admin": true}'</span>

<span class="c"># remove database admin privilege</span>
curl -X POST <span class="s1">'http://localhost:8086/db/site_dev/users/paul?u=root&amp;p=root'</span> <span class="se">\</span>
  -d <span class="s1">'{"admin": false}'</span>

</pre>

<h3 id="limiting-user-access">Limiting User Access</h3>

<p>Database users have two additional arguments when creating or updating
their objects: <code>readFrom</code> and <code>writeTo</code>. Here&rsquo;s what a
default database user looks like when those arguments aren&rsquo;t specified
on create.</p>
<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paul"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"readFrom"</span><span class="p">:</span><span class="w"> </span><span class="s2">".*"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"writeTo"</span><span class="p">:</span><span class="w"> </span><span class="s2">".*"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>This example user has the ability to read and write from any time
series. If you want to restrict the user to only being able to write
data, update the user by <code>POST</code>ing to <code>db/site_dev/users/paul</code>.</p>
<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"readFrom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^$"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"writeTo"</span><span class="p">:</span><span class="w"> </span><span class="s2">".*"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>You have to specify both <code>readFrom</code> and <code>writeTo</code> when you update the
permissions of a user. Both are a regex that determine which time
series the user has permission to read from or write to.</p>

<h2 id="forcefully-removing-a-server-from-the-cluster">Forcefully removing a server from the cluster</h2>

<p>You can forcefully remove a server from a running cluster with an API call. This will take it out of Raft and tell the rest of the servers that it is gone. No data will be copied from the server if it happens to still be up. This also doesn&rsquo;t require Raft consensus. <strong>Use with caution!</strong></p>
<pre class="highlight plaintext">curl -X DELETE \
  'http://localhost:8086/cluster/servers/23?u=root&amp;p=root'
</pre>

<p>Removes server with ID 23 from the cluster.</p>

<h2 id="pretty-printed-output">Pretty-Printed Output</h2>

<p>The Administration API supports pretty-printed JSON responses. To enable pretty-printed output, append <code>pretty=true</code> to the URL.</p>
</div></div></section><script type="text/javascript">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-45024174-1', 'influxdb.org');
ga('send', 'pageview');</script><script type="text/javascript">(function() {
  $("#docs h1, #docs h2, #docs h3, #docs h4").each(function(i, el) {
    var id, text;
    id = el.id;
    text = $(el).text();
    return $(el).html('<a href="#' + id + '">' + text + '</a>');
  });

}).call(this);
</script></body></html>