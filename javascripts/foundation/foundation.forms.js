!function(t,e,n,i){"use strict";Foundation.libs.forms={name:"forms",version:"4.3.2",cache:{},settings:{disable_class:"no-custom",last_combo:null},init:function(e,n,i){return"object"==typeof n&&t.extend(!0,this.settings,n),"string"!=typeof n?(this.settings.init||this.events(),this.assemble(),this.settings.init):this[n].call(this,i)},assemble:function(){var e=this;t('form.custom input[type="radio"],[type="checkbox"]',t(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).each(function(t,n){e.set_custom_markup(n)}).change(function(){e.set_custom_markup(this)}),t("form.custom select",t(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).not("[multiple=multiple]").each(this.append_custom_select)},events:function(){var i=this;t(this.scope).on("click.fndtn.forms","form.custom span.custom.checkbox",function(e){e.preventDefault(),e.stopPropagation(),i.toggle_checkbox(t(this))}).on("click.fndtn.forms","form.custom span.custom.radio",function(e){e.preventDefault(),e.stopPropagation(),i.toggle_radio(t(this))}).on("change.fndtn.forms","form.custom select",function(e,n){t(this).is('[data-customforms="disabled"]')||i.refresh_custom_select(t(this),n)}).on("click.fndtn.forms","form.custom label",function(e){if(t(e.target).is("label")){var n,s,r=t("#"+i.escape(t(this).attr("for"))).not('[data-customforms="disabled"]');0!==r.length&&("checkbox"===r.attr("type")?(e.preventDefault(),n=t(this).find("span.custom.checkbox"),0===n.length&&(n=r.add(this).siblings("span.custom.checkbox").first()),i.toggle_checkbox(n)):"radio"===r.attr("type")&&(e.preventDefault(),s=t(this).find("span.custom.radio"),0===s.length&&(s=r.add(this).siblings("span.custom.radio").first()),i.toggle_radio(s)))}}).on("mousedown.fndtn.forms","form.custom div.custom.dropdown",function(){return!1}).on("click.fndtn.forms","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(e){var n=t(this),r=n.closest("div.custom.dropdown"),o=s(r,"select");return r.hasClass("open")||t(i.scope).trigger("click"),e.preventDefault(),!1===o.is(":disabled")?(r.toggleClass("open"),r.hasClass("open")?t(i.scope).on("click.fndtn.forms.customdropdown",function(){r.removeClass("open"),t(i.scope).off(".fndtn.forms.customdropdown")}):t(i.scope).on(".fndtn.forms.customdropdown"),!1):void 0}).on("click.fndtn.forms touchend.fndtn.forms","form.custom div.custom.dropdown li",function(e){var i=t(this),r=i.closest("div.custom.dropdown"),o=s(r,"select"),a=0;if(e.preventDefault(),e.stopPropagation(),!t(this).hasClass("disabled")){t("div.dropdown").not(r).removeClass("open");var c=i.closest("ul").find("li.selected");if(c.removeClass("selected"),i.addClass("selected"),r.removeClass("open").find("a.current").text(i.text()),i.closest("ul").find("li").each(function(t){i[0]===this&&(a=t)}),o[0].selectedIndex=a,o.data("prevalue",c.html()),"undefined"!=typeof n.createEvent){var l=n.createEvent("HTMLEvents");l.initEvent("change",!0,!0),o[0].dispatchEvent(l)}else o[0].fireEvent("onchange")}}),t(e).on("keydown",function(e){var i=(n.activeElement,Foundation.libs.forms),r=t(".custom.dropdown"),o=s(r,"select"),a=t("input,select,textarea,button");if(r.length>0&&r.hasClass("open")){if(e.preventDefault(),9===e.which&&(t(a[t(a).index(o)+1]).focus(),r.removeClass("open")),13===e.which&&r.find("li.selected").trigger("click"),27===e.which&&r.removeClass("open"),e.which>=65&&e.which<=90){var c=i.go_to(r,e.which),l=r.find("li.selected");c&&(l.removeClass("selected"),i.scrollTo(c.addClass("selected"),300))}if(38===e.which){var l=r.find("li.selected"),u=l.prev(":not(.disabled)");u.length>0&&(u.parent()[0].scrollTop=u.parent().scrollTop()-i.outerHeight(u),l.removeClass("selected"),u.addClass("selected"))}else if(40===e.which){var l=r.find("li.selected"),c=l.next(":not(.disabled)");c.length>0&&(c.parent()[0].scrollTop=c.parent().scrollTop()+i.outerHeight(c),l.removeClass("selected"),c.addClass("selected"))}}}),t(e).on("keyup",function(){var e=n.activeElement,i=t(".custom.dropdown");e===i.find(".current")[0]&&i.find(".selector").focus().click()}),this.settings.init=!0},go_to:function(t,e){var n=t.find("li"),i=n.length;if(i>0)for(var s=0;i>s;s++){var r=n.eq(s).text().charAt(0).toLowerCase();if(r===String.fromCharCode(e).toLowerCase())return n.eq(s)}},scrollTo:function(t,e){if(!(0>e)){var n=t.parent(),i=this.outerHeight(t),s=i*t.index()-n.scrollTop(),r=10*(s/e);this.scrollToTimerCache=setTimeout(function(){isNaN(parseInt(r,10))||(n[0].scrollTop=n.scrollTop()+r,this.scrollTo(t,e-10))}.bind(this),10)}},set_custom_markup:function(e){var n=t(e),i=n.attr("type"),s=n.next("span.custom."+i);n.parent().hasClass("switch")||n.addClass("hidden-field"),0===s.length&&(s=t('<span class="custom '+i+'"></span>').insertAfter(n)),s.toggleClass("checked",n.is(":checked")),s.toggleClass("disabled",n.is(":disabled"))},append_custom_select:function(e,n){var i,s=Foundation.libs.forms,r=t(n),o=r.next("div.custom.dropdown"),a=o.find("ul"),c=(o.find(".current"),o.find(".selector")),l=r.find("option"),u=l.filter(":selected"),d=r.attr("class")?r.attr("class").split(" "):[],f=0,h="",p=!1;if(0===o.length){var g=r.hasClass("small")?"small":r.hasClass("medium")?"medium":r.hasClass("large")?"large":r.hasClass("expand")?"expand":"";o=t('<div class="'+["custom","dropdown",g].concat(d).filter(function(t,e,n){return""===t?!1:n.indexOf(t)===e}).join(" ")+'"><a href="#" class="selector"></a><ul /></div>'),c=o.find(".selector"),a=o.find("ul"),h=l.map(function(){var e=t(this).attr("class")?t(this).attr("class"):"";return"<li class='"+e+"'>"+t(this).html()+"</li>"}).get().join(""),a.append(h),p=o.prepend('<a href="#" class="current">'+(u.html()||"")+"</a>").find(".current"),r.after(o).addClass("hidden-field")}else h=l.map(function(){return"<li>"+t(this).html()+"</li>"}).get().join(""),a.html("").append(h);if(s.assign_id(r,o),o.toggleClass("disabled",r.is(":disabled")),i=a.find("li"),s.cache[o.data("id")]=i.length,l.each(function(e){this.selected&&(i.eq(e).addClass("selected"),p&&p.html(t(this).html())),t(this).is(":disabled")&&i.eq(e).addClass("disabled")}),!o.is(".small, .medium, .large, .expand")){o.addClass("open");var s=Foundation.libs.forms;s.hidden_fix.adjust(a),f=s.outerWidth(i)>f?s.outerWidth(i):f,Foundation.libs.forms.hidden_fix.reset(),o.removeClass("open")}},assign_id:function(t,e){var n=[+new Date,Foundation.random_str(5)].join("-");t.attr("data-id",n),e.attr("data-id",n)},refresh_custom_select:function(e,n){var i=this,s=0,r=e.next(),o=e.find("option"),a=r.find("ul"),c=r.find("li");if(o.length!==this.cache[r.data("id")]||n){a.html("");var l="";o.each(function(){var e=t(this),n=e.html(),i=this.selected;l+='<li class="'+(i?" selected ":"")+(e.is(":disabled")?" disabled ":"")+'">'+n+"</li>",i&&r.find(".current").html(n)}),a.html(l),r.removeAttr("style"),a.removeAttr("style"),r.find("li").each(function(){r.addClass("open"),i.outerWidth(t(this))>s&&(s=i.outerWidth(t(this))),r.removeClass("open")}),c=r.find("li"),this.cache[r.data("id")]=c.length}},refresh_custom_selection:function(e){var n=t("option:selected",e).text();t("a.current",e.next()).text(n)},toggle_checkbox:function(t){var e=t.prev(),n=e[0];!1===e.is(":disabled")&&(n.checked=n.checked?!1:!0,t.toggleClass("checked"),e.trigger("change"))},toggle_radio:function(t){var e=t.prev(),n=e.closest("form.custom"),i=e[0];!1===e.is(":disabled")&&(n.find('input[type="radio"][name="'+this.escape(e.attr("name"))+'"]').next().not(t).removeClass("checked"),t.hasClass("checked")||t.toggleClass("checked"),i.checked=t.hasClass("checked"),e.trigger("change"))},escape:function(t){return t?t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):""},hidden_fix:{tmp:[],hidden:null,adjust:function(e){var n=this;n.hidden=e.parents(),n.hidden=n.hidden.add(e).filter(":hidden"),n.hidden.each(function(){var e=t(this);n.tmp.push(e.attr("style")),e.css({visibility:"hidden",display:"block"})})},reset:function(){var e=this;e.hidden.each(function(n){var s=t(this),r=e.tmp[n];r===i?s.removeAttr("style"):s.attr("style",r)}),e.tmp=[],e.hidden=null}},off:function(){t(this.scope).off(".fndtn.forms")},reflow:function(){}};var s=function(e,n){for(var e=e.prev();e.length;){if(e.is(n))return e;e=e.prev()}return t()}}(Foundation.zj,this,this.document);