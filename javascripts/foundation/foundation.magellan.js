!function(t,e){"use strict";Foundation.libs.magellan={name:"magellan",version:"4.3.2",settings:{activeClass:"active",threshold:0},init:function(e,n,r){return this.scope=e||this.scope,Foundation.inherit(this,"data_options"),"object"==typeof n&&t.extend(!0,this.settings,n),"string"!=typeof n?(this.settings.init||(this.fixed_magellan=t("[data-magellan-expedition]"),this.set_threshold(),this.last_destination=t("[data-magellan-destination]").last(),this.events()),this.settings.init):this[n].call(this,r)},events:function(){var n=this;t(this.scope).on("arrival.fndtn.magellan","[data-magellan-arrival]",function(){var e=t(this),r=e.closest("[data-magellan-expedition]"),i=r.attr("data-magellan-active-class")||n.settings.activeClass;e.closest("[data-magellan-expedition]").find("[data-magellan-arrival]").not(e).removeClass(i),e.addClass(i)}),this.fixed_magellan.on("update-position.fndtn.magellan",function(){t(this)}).trigger("update-position"),t(e).on("resize.fndtn.magellan",function(){this.fixed_magellan.trigger("update-position")}.bind(this)).on("scroll.fndtn.magellan",function(){var r=t(e).scrollTop();n.fixed_magellan.each(function(){var e=t(this);"undefined"==typeof e.data("magellan-top-offset")&&e.data("magellan-top-offset",e.offset().top),"undefined"==typeof e.data("magellan-fixed-position")&&e.data("magellan-fixed-position",!1);var i=r+n.settings.threshold>e.data("magellan-top-offset"),a=e.attr("data-magellan-top-offset");e.data("magellan-fixed-position")!=i&&(e.data("magellan-fixed-position",i),i?(e.addClass("fixed"),e.css({position:"fixed",top:0})):(e.removeClass("fixed"),e.css({position:"",top:""})),i&&"undefined"!=typeof a&&0!=a&&e.css({position:"fixed",top:a+"px"}))})}),this.last_destination.length>0&&t(e).on("scroll.fndtn.magellan",function(){var r=t(e).scrollTop(),i=r+t(e).height(),a=Math.ceil(n.last_destination.offset().top);t("[data-magellan-destination]").each(function(){var e=t(this),o=e.attr("data-magellan-destination"),s=e.offset().top-r;s<=n.settings.threshold&&t("[data-magellan-arrival='"+o+"']").trigger("arrival"),i>=t(n.scope).height()&&a>r&&i>a&&t("[data-magellan-arrival]").last().trigger("arrival")})}),this.settings.init=!0},set_threshold:function(){"number"!=typeof this.settings.threshold&&(this.settings.threshold=this.fixed_magellan.length>0?this.outerHeight(this.fixed_magellan,!0):0)},off:function(){t(this.scope).off(".fndtn.magellan"),t(e).off(".fndtn.magellan")},reflow:function(){}}}(Foundation.zj,this,this.document);