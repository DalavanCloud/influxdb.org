!function(t,e,n,r){"use strict";Foundation.libs.clearing={name:"clearing",version:"4.3.2",settings:{templates:{viewing:'<a href="#" class="clearing-close">&times;</a><div class="visible-img" style="display: none"><img src="//:0"><p class="clearing-caption"></p><a href="#" class="clearing-main-prev"><span></span></a><a href="#" class="clearing-main-next"><span></span></a></div>'},close_selectors:".clearing-close",init:!1,locked:!1},init:function(e,n,r){var i=this;return Foundation.inherit(this,"set_data get_data remove_data throttle data_options"),"object"==typeof n&&(r=t.extend(!0,this.settings,n)),"string"!=typeof n?(t(this.scope).find("ul[data-clearing]").each(function(){var e=t(this),n=n||{},r=e.find("li"),a=i.get_data(e);!a&&r.length>0&&(n.$parent=e.parent(),i.set_data(e,t.extend({},i.settings,n,i.data_options(e))),i.assemble(e.find("li")),i.settings.init||i.events().swipe_events())}),this.settings.init):this[n].call(this,r)},events:function(){var n=this;return t(this.scope).on("click.fndtn.clearing","ul[data-clearing] li",function(e,r,i){var r=r||t(this),i=i||r,a=r.next("li"),o=n.get_data(r.parent()),s=t(e.target);e.preventDefault(),o||n.init(),i.hasClass("visible")&&r[0]===i[0]&&a.length>0&&n.is_open(r)&&(i=a,s=i.find("img")),n.open(s,r,i),n.update_paddles(i)}).on("click.fndtn.clearing",".clearing-main-next",function(t){this.nav(t,"next")}.bind(this)).on("click.fndtn.clearing",".clearing-main-prev",function(t){this.nav(t,"prev")}.bind(this)).on("click.fndtn.clearing",this.settings.close_selectors,function(t){Foundation.libs.clearing.close(t,this)}).on("keydown.fndtn.clearing",function(t){this.keydown(t)}.bind(this)),t(e).on("resize.fndtn.clearing",function(){this.resize()}.bind(this)),this.settings.init=!0,this},swipe_events:function(){var e=this;t(this.scope).on("touchstart.fndtn.clearing",".visible-img",function(e){e.touches||(e=e.originalEvent);var n={start_page_x:e.touches[0].pageX,start_page_y:e.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:r};t(this).data("swipe-transition",n),e.stopPropagation()}).on("touchmove.fndtn.clearing",".visible-img",function(n){if(n.touches||(n=n.originalEvent),!(n.touches.length>1||n.scale&&1!==n.scale)){var r=t(this).data("swipe-transition");if("undefined"==typeof r&&(r={}),r.delta_x=n.touches[0].pageX-r.start_page_x,"undefined"==typeof r.is_scrolling&&(r.is_scrolling=!!(r.is_scrolling||Math.abs(r.delta_x)<Math.abs(n.touches[0].pageY-r.start_page_y))),!r.is_scrolling&&!r.active){n.preventDefault();var i=r.delta_x<0?"next":"prev";r.active=!0,e.nav(n,i)}}}).on("touchend.fndtn.clearing",".visible-img",function(e){t(this).data("swipe-transition",{}),e.stopPropagation()})},assemble:function(e){var n=e.parent();n.after('<div id="foundationClearingHolder"></div>');var r=t("#foundationClearingHolder"),i=this.get_data(n),a=n.detach(),o={grid:'<div class="carousel">'+this.outerHTML(a[0])+"</div>",viewing:i.templates.viewing},s='<div class="clearing-assembled"><div>'+o.viewing+o.grid+"</div></div>";return r.after(s).remove()},open:function(t,e,n){var r=n.closest(".clearing-assembled"),i=r.find("div").first(),a=i.find(".visible-img"),o=a.find("img").not(t);this.locked()||(o.attr("src",this.load(t)).css("visibility","hidden"),this.loaded(o,function(){o.css("visibility","visible"),r.addClass("clearing-blackout"),i.addClass("clearing-container"),a.show(),this.fix_height(n).caption(a.find(".clearing-caption"),t).center(o).shift(e,n,function(){n.siblings().removeClass("visible"),n.addClass("visible")})}.bind(this)))},close:function(e,n){e.preventDefault();var r,i,a=function(t){return/blackout/.test(t.selector)?t:t.closest(".clearing-blackout")}(t(n));return n===e.target&&a&&(r=a.find("div").first(),i=r.find(".visible-img"),this.settings.prev_index=0,a.find("ul[data-clearing]").attr("style","").closest(".clearing-blackout").removeClass("clearing-blackout"),r.removeClass("clearing-container"),i.hide()),!1},is_open:function(t){return t.parent().prop("style").length>0},keydown:function(e){var n=t(".clearing-blackout").find("ul[data-clearing]");39===e.which&&this.go(n,"next"),37===e.which&&this.go(n,"prev"),27===e.which&&t("a.clearing-close").trigger("click")},nav:function(e,n){var r=t(".clearing-blackout").find("ul[data-clearing]");e.preventDefault(),this.go(r,n)},resize:function(){var e=t(".clearing-blackout .visible-img").find("img");e.length&&this.center(e)},fix_height:function(e){var n=e.parent().children(),r=this;return n.each(function(){var e=t(this),n=e.find("img");e.height()>r.outerHeight(n)&&e.addClass("fix-height")}).closest("ul").width(100*n.length+"%"),this},update_paddles:function(t){var e=t.closest(".carousel").siblings(".visible-img");t.next().length>0?e.find(".clearing-main-next").removeClass("disabled"):e.find(".clearing-main-next").addClass("disabled"),t.prev().length>0?e.find(".clearing-main-prev").removeClass("disabled"):e.find(".clearing-main-prev").addClass("disabled")},center:function(t){return this.rtl?t.css({marginRight:-(this.outerWidth(t)/2),marginTop:-(this.outerHeight(t)/2)}):t.css({marginLeft:-(this.outerWidth(t)/2),marginTop:-(this.outerHeight(t)/2)}),this},load:function(t){if("A"===t[0].nodeName)var e=t.attr("href");else var e=t.parent().attr("href");return this.preload(t),e?e:t.attr("src")},preload:function(t){this.img(t.closest("li").next()).img(t.closest("li").prev())},loaded:function(t,e){function n(){e()}function r(){if(this.one("load",n),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var t=this.attr("src"),e=t.match(/\?/)?"&":"?";e+="random="+(new Date).getTime(),this.attr("src",t+e)}}return t.attr("src")?(t[0].complete||4===t[0].readyState?n():r.call(t),void 0):(n(),void 0)},img:function(t){if(t.length){var e=new Image,n=t.find("a");e.src=n.length?n.attr("href"):t.find("img").attr("src")}return this},caption:function(t,e){var n=e.data("caption");return n?t.html(n).show():t.text("").hide(),this},go:function(t,e){var n=t.find(".visible"),r=n[e]();r.length&&r.find("img").trigger("click",[n,r])},shift:function(t,e,n){var r,i=e.parent(),a=this.settings.prev_index||e.index(),o=this.direction(i,t,e),s=parseInt(i.css("left"),10),u=this.outerWidth(e);e.index()===a||/skip/.test(o)?/skip/.test(o)&&(r=e.index()-this.settings.up_count,this.lock(),r>0?i.animate({left:-(r*u)},300,this.unlock()):i.animate({left:0},300,this.unlock())):/left/.test(o)?(this.lock(),i.animate({left:s+u},300,this.unlock())):/right/.test(o)&&(this.lock(),i.animate({left:s-u},300,this.unlock())),n()},direction:function(e,n,r){var i,a=e.find("li"),o=this.outerWidth(a)+this.outerWidth(a)/4,s=Math.floor(this.outerWidth(t(".clearing-container"))/o)-1,u=a.index(r);return this.settings.up_count=s,i=this.adjacent(this.settings.prev_index,u)?u>s&&u>this.settings.prev_index?"right":u>s-1&&u<=this.settings.prev_index?"left":!1:"skip",this.settings.prev_index=u,i},adjacent:function(t,e){for(var n=e+1;n>=e-1;n--)if(n===t)return!0;return!1},lock:function(){this.settings.locked=!0},unlock:function(){this.settings.locked=!1},locked:function(){return this.settings.locked},outerHTML:function(t){return t.outerHTML||(new XMLSerializer).serializeToString(t)},off:function(){t(this.scope).off(".fndtn.clearing"),t(e).off(".fndtn.clearing"),this.remove_data(),this.settings.init=!1},reflow:function(){this.init()}}}(Foundation.zj,this,this.document);