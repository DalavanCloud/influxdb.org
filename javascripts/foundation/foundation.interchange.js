!function(t,e,n){"use strict";Foundation.libs.interchange={name:"interchange",version:"4.2.4",cache:{},images_loaded:!1,settings:{load_attr:"interchange",named_queries:{"default":"only screen and (min-width: 1px)",small:"only screen and (min-width: 768px)",medium:"only screen and (min-width: 1280px)",large:"only screen and (min-width: 1440px)",landscape:"only screen and (orientation: landscape)",portrait:"only screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (min-device-pixel-ratio: 2),only screen and (min-resolution: 192dpi),only screen and (min-resolution: 2dppx)"},directives:{replace:function(t,e){if(/IMG/.test(t[0].nodeName)){var n=t[0].src;if(new RegExp(e,"i").test(n))return;return t[0].src=e,t.trigger("replace",[t[0].src,n])}}}},init:function(e,n,r){return Foundation.inherit(this,"throttle"),"object"==typeof n&&t.extend(!0,this.settings,n),this.events(),this.images(),"string"!=typeof n?this.settings.init:this[n].call(this,r)},events:function(){var n=this;t(e).on("resize.fndtn.interchange",n.throttle(function(){n.resize.call(n)},50))},resize:function(){var e=this.cache;if(!this.images_loaded)return setTimeout(t.proxy(this.resize,this),50),void 0;for(var n in e)if(e.hasOwnProperty(n)){var r=this.results(n,e[n]);r&&this.settings.directives[r.scenario[1]](r.el,r.scenario[0])}},results:function(e,n){var r=n.length;if(r>0)for(var i=t('[data-uuid="'+e+'"]'),a=r-1;a>=0;a--){var o,s=n[a][2];if(o=this.settings.named_queries.hasOwnProperty(s)?matchMedia(this.settings.named_queries[s]):matchMedia(s),o.matches)return{el:i,scenario:n[a]}}return!1},images:function(t){return"undefined"==typeof this.cached_images||t?this.update_images():this.cached_images},update_images:function(){var e=n.getElementsByTagName("img"),r=e.length,i=0,a="data-"+this.settings.load_attr;this.cached_images=[],this.images_loaded=!1;for(var o=r-1;o>=0;o--)this.loaded(t(e[o]),function(t){if(i++,t){var e=t.getAttribute(a)||"";e.length>0&&this.cached_images.push(t)}i===r&&(this.images_loaded=!0,this.enhance())}.bind(this));return"deferred"},loaded:function(t,e){function n(){e(t[0])}function r(){if(this.one("load",n),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var t=this.attr("src"),e=t.match(/\?/)?"&":"?";e+="random="+(new Date).getTime(),this.attr("src",t+e)}}return t.attr("src")?(t[0].complete||4===t[0].readyState?n():r.call(t),void 0):(n(),void 0)},enhance:function(){for(var n=this.images().length,r=n-1;r>=0;r--)this._object(t(this.images()[r]));return t(e).trigger("resize")},parse_params:function(t,e,n){return[this.trim(t),this.convert_directive(e),this.trim(n)]},convert_directive:function(t){var e=this.trim(t);return e.length>0?e:"replace"},_object:function(t){var e=this.parse_data_attr(t),n=[],r=e.length;if(r>0)for(var i=r-1;i>=0;i--){var a=e[i].split(/\((.*?)(\))$/);if(a.length>1){var o=a[0].split(","),s=this.parse_params(o[0],o[1],a[1]);n.push(s)}}return this.store(t,n)},uuid:function(t){function e(){return(0|65536*(1+Math.random())).toString(16).substring(1)}var n=t||"-";return e()+e()+n+e()+n+e()+n+e()+n+e()+e()+e()},store:function(t,e){var n=this.uuid(),r=t.data("uuid");return r?this.cache[r]:(t.attr("data-uuid",n),this.cache[n]=e)},trim:function(e){return"string"==typeof e?t.trim(e):e},parse_data_attr:function(t){for(var e=t.data(this.settings.load_attr).split(/\[(.*?)\]/),n=e.length,r=[],i=n-1;i>=0;i--)e[i].replace(/[\W\d]+/,"").length>4&&r.push(e[i]);return r},reflow:function(){this.images(!0)}}}(Foundation.zj,this,this.document);